<project_specification>
  <project_name>EvoMind - 个人成长认知外骨骼App</project_name>

  <overview>
    EvoMind是一款面向国内用户的个人成长认知外骨骼App，通过AI技术帮助用户构建专属的知识体系和个人成长Agent。
    核心特色：离线优先、本地AI处理、透明算力成本、国内平台深度整合。
    用户可以通过截图导入小红书/微信等平台的信息源，App自动提取内容并生成认知卡片、脑图和AI摘要。
    支持本地训练个人专属Agent，所有数据本地存储，保护隐私。
  </overview>

  <technology_stack>
    <android_frontend>
      <language>Kotlin</language>
      <framework>Jetpack Compose</framework>
      <architecture>MVVM + Clean Architecture</architecture>
      <local_database>SQLite + Room</local_database>
      <local_ai>ONNX Runtime / TensorFlow Lite (国内轻量模型)</local_ai>
      <ocr>百度OCR / 腾讯OCR SDK</ocr>
      <min_sdk>Android 10 (API 29)</min_sdk>
      <target_sdk>Android 14 (API 34)</target_sdk>
    </android_frontend>

    <backend>
      <framework>Spring Boot 3.x</framework>
      <language>Java 17</language>
      <database>MySQL 8.0</database>
      <cache>Redis</cache>
      <message_queue>RabbitMQ (可选)</message_queue>
      <ai_models>百度文心一言API / 阿里通义千问API</ai_models>
      <payment>微信支付 / 支付宝</payment>
      <sms>阿里云SMS / 腾讯云SMS</sms>
    </backend>

    <devops>
      <container>Docker + Docker Compose</container>
      <ci_cd>GitHub Actions / Jenkins</ci_cd>
      <cloud>阿里云 / 腾讯云</cloud>
      <cdn>阿里云OSS / 腾讯云COS</cdn>
    </devops>
  </technology_stack>

  <core_modules>
    <module name="输入模块 - Cognitive Ingestion">
      <feature>截图识别导入信息源</feature>
      <description>用户截图小红书/微信文章列表页，OCR识别博主名称和头像，自动生成可选择的博主列表，一键加入个人信息源</description>
      <tech>百度OCR SDK，图像预处理，文字识别，头像提取</tech>

      <feature>链接自动抓取</feature>
      <description>支持粘贴小红书/微信公众号/知乎/抖音链接，系统自动抓取正文内容</description>
      <tech>Jsoup网页抓取，内容解析，反爬策略</tech>

      <feature>语音快速记录</feature>
      <description>长按语音按钮，实时转文字并保存为灵感笔记，支持离线语音识别</description>
      <tech>百度语音SDK，本地语音识别模型</tech>
    </module>

    <module name="认知模块 - Cognitive Processing">
      <feature>AI认知卡片生成</feature>
      <description>自动提取信息源内容的核心观点、金句、案例，生成结构化认知卡片</description>
      <tech>百度文心一言API，Prompt工程，内容摘要</tech>

      <feature>观点冲突标记</feature>
      <description>当不同信息源对同一话题观点冲突时，自动标记并展示对比</description>
      <tech>文本相似度计算，观点分析，冲突检测算法</tech>

      <feature>7:3智能混合信息流</feature>
      <description>70%来自用户自选信息源更新，30%由系统根据用户进化计划精准投喂</description>
      <tech>推荐算法，用户画像，内容匹配</tech>

      <feature>AI苏格拉底式对话</feature>
      <description>针对每篇内容，AI以苏格拉底式提问引导用户深度思考</description>
      <tech>对话系统，Prompt工程，追问逻辑</tech>
    </module>

    <module name="内化模块 - Deep Internalization">
      <feature>本地语料库管理</feature>
      <description>所有认知卡片、脑图、讨论记录、语音录音本地加密存储，支持按时间/主题/标签检索</description>
      <tech>SQLite加密，全文检索，标签系统</tech>

      <feature>知识脑图自动生成</feature>
      <description>基于语料库内容，自动生成主题知识脑图，支持手动编辑</description>
      <tech>知识图谱，图数据库，可视化</tech>

      <feature>一键训练私有Agent</feature>
      <description>基于本地语料库，一键训练轻量级私有Agent，完全本地运行，离线可用</description>
      <tech>ONNX Runtime，模型量化，本地推理</tech>

      <feature>Agent对话系统</feature>
      <description>训练后的Agent可回答用户关于自身学习内容的问题，辅助日常任务</description>
      <tech>RAG检索增强生成，本地向量数据库</tech>
    </module>

    <module name="行动模块 - Actionable Challenges">
      <feature>变步频挑战任务</feature>
      <description>根据用户学习阶段动态调整任务难度：入门(每日微任务)、进阶(3天小任务)、精通(周/双周深度项目)</description>
      <tech>任务调度系统，难度评估算法</tech>

      <feature>作品化存证</feature>
      <description>用户完成任务上传作品(脑图/方案/视频)，获得能力徽章，记录成长轨迹</description>
      <tech>文件存储，版本管理，徽章系统</tech>

      <feature>小组学习</feature>
      <description>支持创建/加入学习小组，共享讨论精华，互相监督打卡</description>
      <tech>实时通信，内容审核，权限管理</tech>
    </module>

    <module name="反馈传播模块 - Viral Feedback">
      <feature>成长数据可视化</feature>
      <description>学习时长、认知卡片数、脑图规模、Agent进化度等数据可视化展示</description>
      <tech>图表库，数据可视化，动画</tech>

      <feature>能力报告生成</feature>
      <description>每周/每月生成个人能力报告，包含知识图谱、成长曲线、下阶段建议</description>
      <tech>报告生成，PDF导出，数据聚合</tech>

      <feature>社交分享图生成</feature>
      <description>一键生成精美分享图，适配微信/小红书/知乎等平台尺寸</description>
      <tech>Canvas绘制，图片合成，多平台适配</tech>
    </module>

    <module name="订阅与支付模块">
      <feature>透明算力成本模型</feature>
      <description>实时展示各项功能的算力成本，用户清晰了解每笔费用的构成</description>
      <tech>成本计算，实时统计，透明展示</tech>

      <feature>灵活订阅套餐</feature>
      <description>基础版/进阶版/自由版三档套餐，支持功能维度自选</description>
      <tech>套餐管理，权限控制，升级降级</tech>

      <feature>微信支付/支付宝集成</feature>
      <description>支持国内主流支付方式，订阅实时生效</description>
      <tech>微信支付SDK，支付宝SDK，订单管理</tech>
    </module>
  </core_modules>

  <database_design>
    <local_database type="SQLite">
      <tables>
        - users: 用户基础信息，登录状态
        - info_sources: 信息源列表（博主/公众号）
        - content_items: 抓取的内容原文
        - cognitive_cards: 认知卡片
        - knowledge_nodes: 知识脑图节点
        - knowledge_edges: 知识脑图关系
        - voice_notes: 语音笔记
        - agent_configs: 本地Agent配置
        - user_corpus: 用户语料库索引
        - challenge_tasks: 挑战任务
        - user_works: 用户作品
        - study_groups: 学习小组
        - group_discussions: 小组讨论
      </tables>
    </local_database>

    <server_database type="MySQL">
      <tables>
        - users: 用户账号，手机号，微信openid
        - subscriptions: 订阅套餐，有效期
        - payments: 支付记录
        - computing_costs: 算力成本统计
        - content_metadata: 内容元数据（非全文）
        - ai_model_calls: AI模型调用记录
        - group_essences: 小组讨论精华（非隐私内容）
      </tables>
    </server_database>
  </database_design>

  <ui_ux_requirements>
    <design_style>极简主义，冷色调（深空灰/科技蓝/银白色），参考Readwise/Notion</design_style>
    <interaction>手势操作优先，单功能操作≤3步，核心功能一键完成</interaction>
    <accessibility>支持字体大小调节，高对比度模式，屏幕阅读器</accessibility>
    <animation>轻量动效，时长≤0.5秒，可关闭</animation>
    <offline_support>核心功能离线可用，联网时自动同步</offline_support>
  </ui_ux_requirements>

  <compliance_requirements>
    <data_privacy>用户数据本地存储，云端仅存储脱敏元数据</data_privacy>
    <content_moderation>AI生成内容审核，敏感词过滤</content_moderation>
    <payment_compliance>符合国内支付监管要求，提供发票</payment_compliance>
    <app_store>符合国内应用商店审核要求，无违规内容</app_store>
  </compliance_requirements>

  <performance_requirements>
    <app_launch>≤3秒</app_launch>
    <page_switch>无卡顿</page_switch>
    <ai_generation>≤5秒（除Agent训练）</ai_generation>
    <screenshot_ocr>≤3秒</screenshot_ocr>
    <memory_usage>≤500MB</memory_usage>
    <offline_capability>核心功能完全离线可用</offline_capability>
  </performance_requirements>

  <deliverables>
    <android_app>APK安装包（正式版/测试版），适配主流国产机型</android_app>
    <backend>Spring Boot服务源码，Docker部署脚本</backend>
    <database>MySQL初始化脚本，SQLite迁移脚本</database>
    <documentation>API文档，部署手册，用户手册</documentation>
  </deliverables>

  <implementation_phases>
    <phase number="1" name="基础架构搭建">
      - Android项目初始化（Kotlin + Jetpack Compose）
      - Spring Boot后端搭建
      - 数据库设计与初始化
      - 基础UI框架（导航、主题、组件库）
    </phase>

    <phase number="2" name="核心功能开发">
      - 用户系统（注册、登录、微信授权）
      - 截图OCR识别功能
      - 内容抓取与解析
      - 本地语料库管理
    </phase>

    <phase number="3" name="AI功能集成">
      - 国内AI模型API接入
      - 认知卡片生成
      - AI对话系统
      - 知识脑图生成
    </phase>

    <phase number="4" name="高级功能">
      - 本地Agent训练
      - 挑战任务系统
      - 社交分享功能
      - 数据可视化
    </phase>

    <phase number="5" name="订阅与支付">
      - 算力成本计算系统
      - 微信支付/支付宝集成
      - 订阅管理
      - 免费体验机制
    </phase>

    <phase number="6" name="优化与发布">
      - 性能优化
      - 安全加固
      - 应用商店准备
      - 文档完善
    </phase>
  </implementation_phases>
</project_specification>
